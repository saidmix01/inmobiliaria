import{_ as j}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{c as a,a as e,t as l,g as M,F as x,r as w,d as h,b as r,e as c,o as I,f as n,n as B}from"./runtime-core.esm-bundler.CZed73ja.js";const P={__name:"InmuebleList",setup(C,{expose:s}){s();const g="https://inmobiliariabackend-cxa2eegkg0dpdjcs.centralus-01.azurewebsites.net",t=c([]),p=c([]),_=c(!0),m=c(null),u=c(null);let o=null;const f=(d,i)=>{const k=[];for(let b=0;b<d.length;b+=i)k.push(d.slice(b,b+i));return k},v=async()=>{try{const i=await(await fetch(`${g}/api/properties/get_properties`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"all"})})).json();if(!i.status)throw new Error(i.message||"Error al cargar inmuebles");t.value=i.data,p.value=f(i.data,2)}catch(d){m.value=d.message}finally{_.value=!1}},S=d=>{u.value=d;const i=document.getElementById("propertyModal");o=bootstrap.Modal.getOrCreateInstance(i),o.show()};I(v);const y={apiUrl:g,properties:t,propertyChunks:p,loading:_,error:m,selected:u,get modalInstance(){return o},set modalInstance(d){o=d},chunkArray:f,fetchProperties:v,openModal:S,ref:c,onMounted:I};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},E={key:0,class:"text-center"},N={key:1,class:"alert alert-danger"},V={key:2},L={id:"carouselInmuebles",class:"carousel slide","data-bs-ride":"carousel"},O={class:"carousel-inner"},T={class:"row justify-content-center"},A={class:"card h-100 shadow"},F=["src"],H={class:"card-body d-flex flex-column"},q={class:"card-title"},z={class:"card-text mb-1"},D={class:"card-text mb-1"},J={class:"card-text mb-1"},U={class:"card-text mb-1"},G=["onClick"],K={class:"modal fade",id:"propertyModal",tabindex:"-1","aria-labelledby":"propertyModalLabel","aria-hidden":"true"},Q={class:"modal-dialog modal-dialog-centered modal-lg"},R={key:0,class:"modal-content"},W={class:"modal-header"},X={class:"modal-title"},Y={class:"modal-body"},Z=["src"],$={class:"modal-footer"},ee=["href"];function se(C,s,g,t,p,_){return n(),a("div",null,[t.loading?(n(),a("div",E,"Cargando inmuebles...")):t.error?(n(),a("div",N,l(t.error),1)):(n(),a("div",V,[e("div",L,[e("div",O,[(n(!0),a(x,null,w(t.propertyChunks,(m,u)=>(n(),a("div",{class:B(["carousel-item",{active:u===0}]),key:u},[e("div",T,[(n(!0),a(x,null,w(m,o=>(n(),a("div",{class:"col-md-4 mb-3",key:o.id},[e("div",A,[o.image_url?(n(),a("img",{key:0,src:o.image_url,class:"card-img-top",style:{height:"200px","object-fit":"cover"},alt:"Imagen del inmueble"},null,8,F)):h("",!0),e("div",H,[e("h5",q,l(o.address),1),e("p",z,[s[0]||(s[0]=e("strong",null,"Área:",-1)),r(" "+l(o.area)+" m²",1)]),e("p",D,[s[1]||(s[1]=e("strong",null,"Habitaciones:",-1)),r(" "+l(o.rooms),1)]),e("p",J,[s[2]||(s[2]=e("strong",null,"Baños:",-1)),r(" "+l(o.bathrooms),1)]),e("p",U,[s[3]||(s[3]=e("strong",null,"Precio:",-1)),r(" $"+l(o.price),1)]),e("button",{class:"btn btn-primary mt-3 w-100",onClick:f=>t.openModal(o)}," Ver detalle ",8,G)])])]))),128))])],2))),128))]),s[4]||(s[4]=M('<button class="carousel-control-prev" type="button" data-bs-target="#carouselInmuebles" data-bs-slide="prev"><i class="bi bi-chevron-left fs-2 text-dark bg-white p-2 rounded-circle"></i><span class="visually-hidden">Anterior</span></button><button class="carousel-control-next" type="button" data-bs-target="#carouselInmuebles" data-bs-slide="next"><i class="bi bi-chevron-right fs-2 text-dark bg-white p-2 rounded-circle"></i><span class="visually-hidden">Siguiente</span></button>',2))])])),e("div",K,[e("div",Q,[t.selected?(n(),a("div",R,[e("div",W,[e("h5",X,l(t.selected.address),1),s[5]||(s[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1))]),e("div",Y,[t.selected.image_url?(n(),a("img",{key:0,src:t.selected.image_url,class:"img-fluid mb-3",style:{"max-height":"300px","object-fit":"cover"}},null,8,Z)):h("",!0),e("p",null,[s[6]||(s[6]=e("strong",null,"Área:",-1)),r(" "+l(t.selected.area)+" m²",1)]),e("p",null,[s[7]||(s[7]=e("strong",null,"Habitaciones:",-1)),r(" "+l(t.selected.rooms),1)]),e("p",null,[s[8]||(s[8]=e("strong",null,"Baños:",-1)),r(" "+l(t.selected.bathrooms),1)]),e("p",null,[s[9]||(s[9]=e("strong",null,"Parqueaderos:",-1)),r(" "+l(t.selected.parkingSpaces),1)]),e("p",null,[s[10]||(s[10]=e("strong",null,"Precio:",-1)),r(" $"+l(t.selected.price),1)]),e("p",null,[s[11]||(s[11]=e("strong",null,"Tipo de oferta:",-1)),r(" "+l(t.selected.offer_type),1)])]),e("div",$,[e("a",{href:`/offer/${t.selected.id}`,class:"btn btn-success"},"Aplicar oferta",8,ee),s[12]||(s[12]=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cerrar",-1))])])):h("",!0)])])])}const le=j(P,[["render",se]]);export{le as default};
